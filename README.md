# picLightMeter

一个使用 Python 和 OpenCV 从静态图像估算曝光值（EV）的原型程序。
注意：此原型是读取静态图像来估算曝光值，无法从图像本身还原出真实场景亮度，因为丢失了原始曝光元信息。
要做曝光测光表，应该：
1.使用原始传感器数据（如摄像头实时图像帧）
    必须处理未被压缩、未自动调整曝光的图像帧（如从摄像头直接读取）。
    或至少关闭自动曝光、白平衡、图像增强等。
2.或使用光照传感器（如 BH1750、TSL2561）
    直接获取环境亮度（Lux）值，不受相机参数影响。
    更适合作为“测光表”使用。

测试算法可用后下一步将过渡到使用摄像头模块读取实时图像(因为可以顺便在机械相机上实现实时预览取景和曝光效果)：
    1.准备一个树莓派摄像头模块
    2.用 OpenCV 打开摄像头 cv2.VideoCapture(0)
    3.获取一帧图像（关闭自动曝光）
    4.分析其亮度，估算 EV
    5.输出模拟曝光参数

## 用法

1. 安装依赖：
```bash
pip install -r requirements.txt
```

2. 替换 `data/test1.jpg` 为你要分析的图像。

3. 运行主程序：
```bash
python main.py
```

## 输出示例：
```
曝光分析结果：图像曝光正常
平均亮度: 86.52
估算 EV 值（ISO 200）: 10.3
A模式：设定光圈 f/2.8，推荐快门速度：1/800 秒
S模式：设定快门 1/125 秒，推荐光圈：f/4.0
```

## 文件说明：
- `core/`：图像处理和EV计算核心逻辑
- `utils/`：ISO、快门、光圈互算工具和模拟模式
- `data/`：测试图像
- `main.py`：主运行脚本
